\pgfplotscreateplotcyclelist{climbing}{
	{blue,fill=blue!30!white,mark=none},
    {red,fill=red!30!white,mark=none},
    {green!70!black,fill=green!60!white,mark=none}
}
\pgfplotsset{width=8cm,compat=1.17}
\newenvironment{climbhchart}{%
    \begin{tikzpicture}[inner sep=-3, outer sep=5]
      \begin{axis}[
        y=1mm,
        axis x line=bottom,
        axis y line=none,
        axis line style={-},
        ybar stacked,
        symbolic x coords={<=.6, .7, .8, .9, .10, .11, .12, .13, .14},
        xtick=data,
        xtick style={draw=none},
        ytick=\empty,
        x tick label style={font=\scriptsize},
        xticklabels={${\leq}.6 $, .7, .8, .9, .10, .11, .12, .13, .14}, % Math display for x labels
        ymin=0,
        enlargelimits=0.05,
        enlarge y limits={abs=0},
        cycle list name=climbing
      ]%
}{%
      \end{axis}
    \end{tikzpicture}
}

\newenvironment{climbvchart}{%
    \begin{tikzpicture}[inner sep=-3, outer sep=5]
      \begin{axis}[
        x=1mm,
        axis y line=left,
        axis x line=none,
        axis line style={-},
        xbar stacked,
        symbolic y coords={<=.6, .7, .8, .9, .10, .11, .12, .13, .14},
        ytick=data,
        ytick style={draw=none},
        xtick=\empty,
        y tick label style={font=\scriptsize},
        yticklabels={$ {\leq}.6 $, .7, .8, .9, .10, .11, .12, .13, .14}, % Math display for y labels
        xmin=0,
        enlargelimits=0.05,
        enlarge x limits={abs=0},
        cycle list name=climbing,
        width=8cm,
        height=5cm,
      ]%
}{%
      \end{axis}
    \end{tikzpicture}
}

\def\chartoneh{%
  \begin{climbhchart}
	    \addplot table[x=sport,y=grade]{\climbdataone};% chktex 1
        \addplot table[x=trad,y=grade]{\climbdataone};% chktex 1
  \end{climbhchart}
}
\def\chartonev{%
  \begin{climbhcvart}
	    \addplot table[x=sport,y=grade]{\climbdataone};% chktex 1
        \addplot table[x=trad,y=grade]{\climbdataone};% chktex 1
  \end{climbvchart}
}
\pgfplotstableread{
grade   sport  trad   boulder
<=.6    1      1      0
.7      0      0      0
.8      0      0      1
.9      0      0      0
.10     2      1      0
.11     0      0      1
.12     0      0      0
.13     0      0      0
.14     0      0      0
}\climbdataone

\pgfplotstableread{
grade   sport  trad
<=.6    0      0
.7      0      0
.8      0      0
.9      0      1
.10     1      0
.11     0      0
.12     0      0
.13     0      0
.14     0      0
}\climbdatatwo

\def\charttwoh{%
    \begin{climbhchart}
        \addplot table[x=grade,y=sport]{\climbdatatwo};% chktex 1
        \addplot table[x=grade,y=trad]{\climbdatatwo};% chktex 1
        \addplot table[x=grade,y=boulder]{\climbdatatwo};% chktex 1
    \end{climbhchart}
}

\def\charttwov{%
    \begin{climbvchart}
        \addplot table[y=grade,x=sport]{\climbdatatwo};% chktex 1
        \addplot table[y=grade,x=trad]{\climbdatatwo};% chktex 1
        \addplot table[y=grade,x=boulder]{\climbdatatwo};% chktex 1
    \end{climbvchart}
}

\climbingarea{Region 1}{%
    \climbheader{This region is the best region.}{What is the access information}{How do you get there}{What's the weather like up there?}\\
    \begin{tabular}{c c c c} 
        \toprule
        Wall & Routes & Grades & Classics \\ 
        \midrule
        First Wall & 2 & \chartoneh&   \\ 
        \midrule
        Boulderfield Wall & 8 & \charttwoh& Sporty McSportface \\ [1ex]
        \bottomrule
    \end{tabular}
    \climbingarea{First Wall}{%
        \climbheader{This is the description for the first wall.}{What is the access information}{How do you get there}{}
    }{%
        \tradroute[X]{The Trad Route Name}{5.9}{Use anchors on the next route.}{70}{Santa Claus}
        \sportroute{Sport Route Name}{5.10c}{Jug to the top.}{70}{5}{Jane Doe}
    }
    \climbingarea{Boulderfield Name}{%
	    \charttwov
        \climbheader{\lipsum[1][1]}{\lipsum[1][2-4]}{\lipsum[1][5-7]}{\lipsum[1][8]}% chktex 8
        \climbingarea{Big Rock}{}{%
            \boulderproblem{A Problem}{V3}{Problem Description}{10}{Alan Smithee}
            \tradroute{Another Fun Route}{5.10a}{Make sure the route numbers are not indented}{5}{Jolly Roger}
            \sportroute{Sporty McSportface}{5.10a}{\lipsum[1][9-10]}{5}{15}{Dr.\ Who}% chktex 8
            \boulderproblem{B Problem}{V0-}{\lipsum[1][11-12]}{15}{James Bond}% chktex 8
            \mixedtradroute{A Bolt or Two}{5.4}{\lipsum[1][13]}{100}{2}{Twista Bolten}
            \toproperoute{No Bolts}{5.6}{\lipsum[2][1-2]}{25}{Cher}% chktex 8
            \iceroute{Ice 9}{WI 2}{\lipsum[2][3-4]}{25}{Bobby Drake}% chktex 8
            \sportroute{Unknown Height}{5.10a}{Unit of measure of height should not be printed.}{}{15}{Mr.\ Bean}
        }
    }{}
}{}
